- name: Install Docker dependencies
  apt:
   name:
     - apt-transport-https
     - ca-certificates
     - curl
     - gnupg-agent
     - software-properties-common
   state: present
   update_cache: yes


- name: Add Docker GPG key
  apt_key:
   url: https://download.docker.com/linux/ubuntu/gpg
   state: present


- name: Add Docker repository
  apt_repository:
   repo: "deb https://download.docker.com/linux/ubuntu jammy stable"
   state: present


- name: Install Docker
  apt:
   name:
     - docker-ce
     - docker-ce-cli
     - containerd.io
   state: present
   update_cache: yes


- name: Ensure Docker service is running and enabled on boot
  systemd:
   name: docker
   state: started
   enabled: yes
