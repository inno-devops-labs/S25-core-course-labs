version: '3'

services:
  {{ web_app_container_name }}:
    image: {{ web_app_image }}
    container_name: {{ web_app_container_name }}
    restart: {{ web_app_restart_policy }}
    ports:
      - "{{ web_app_port }}:80"
    volumes:
      - ./data:/usr/share/nginx/html
      - ./logs:/var/log/app
    environment:
{% for key, value in web_app_env_vars.items() %}
      {{ key }}: "{{ value }}"
{% endfor %}
    healthcheck:
      test: ["CMD", "curl", "-f", "http://localhost:80{{ web_app_health_check_path }}"]
      interval: 30s
      timeout: 10s
      retries: 3
    networks:
      - web_network

networks:
  web_network:
    driver: bridge 