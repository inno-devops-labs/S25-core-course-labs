- name: Deploy Python web application in Docker
  block:
    - name: Pull Docker image
      community.docker.docker_image_pull:
        name: "{{ docker_image_name }}"
        tag: "{{ docker_image_tag }}"
      tags:
        - docker
        - pull

    - name: Start Docker Compose
      community.docker.docker_compose_v2:
        build: always
        project_src: "/{{ docker_container_name }}"
        state: present
      tags:
        - docker-compose
        - startup
