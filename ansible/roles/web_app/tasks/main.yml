#SPDX-License-Identifier: MIT-0
---
# tasks file for ansible/roles/web_app

- name: Setup Docker Environment
  block:
    - name: Pull Docker image
      docker_image:
        name: "{{ docker_image }}"
        source: pull
      tags:
        - docker

    - name: Start Docker container
      docker_container:
        name: "{{ container_name }}"
        image: "{{ docker_image }}"
        state: started
        restart_policy: always
      tags:
        - docker
  tags:
    - setup


- name: Deploy Docker Compose File
  template: 
    src: docker-compose.yml.j2
    dest: /home/docker_compose
  tags: 
    - docker
