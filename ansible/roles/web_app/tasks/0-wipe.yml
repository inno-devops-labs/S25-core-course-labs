- name: Clean up
  block:
  - name: Stop the container if running
    docker_container:
      name: '{{ container_name }}'
      state: stopped
    when: web_app_full_wipe | default(false)

  - name: Remove the container
    docker_container:
      name: '{{ container_name }}'
      state: absent
    when: web_app_full_wipe | default(false)

  - name: Remove the Docker image
    docker_image:
      name: '{{ docker_image }}'
      state: absent
    when: web_app_full_wipe | default(false)
  tags:
  - wipe
