- name: Wipe previous deployment if enabled
  block:
    - name: Remove web application container
      docker_container:
        name: web_app
        state: absent
      when: web_app_full_wipe | default(false)
      tags:
        - wipe

    - name: Remove Docker image
      docker_image:
        name: "{{ docker_image }}"
        state: absent
      when: web_app_full_wipe | default(false)
      tags:
        - wipe
  tags:
    - wipe
