---
- name: Wipe existing application container if web_app_full_wipe is true
  when: web_app_full_wipe | bool
  block:
    - name: Stop Docker Compose services
      command: docker-compose -f /tmp/docker-compose.yml down
      tags:
        - wipe

    - name: Remove temporary Docker Compose file
      file:
        path: /tmp/docker-compose.yml
        state: absent
      tags:
        - wipe
