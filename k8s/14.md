## Deploying webapp
```bash
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl get po,sts,svc,pvc
NAME               READY   STATUS    RESTARTS   AGE
pod/moscow-app-0   1/1     Running   0          18s
pod/moscow-app-1   1/1     Running   0          18s
pod/moscow-app-2   1/1     Running   0          18s

NAME                          READY   AGE
statefulset.apps/moscow-app   3/3     59s

NAME                 TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)    AGE
service/kubernetes   ClusterIP   10.96.0.1       <none>        443/TCP    29h
service/moscow-app   ClusterIP   10.97.128.234   <none>        5000/TCP   59s

NAME                                               STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
persistentvolumeclaim/moscow-volume-moscow-app-0   Bound    pvc-23b3cb0b-1aca-474f-b628-b9bf8dbf066d   100Mi      RWO            standard       <unset>                 5m5s
persistentvolumeclaim/moscow-volume-moscow-app-1   Bound    pvc-03b4b0ed-6741-495d-86c0-a7ead78f05a3   100Mi      RWO            standard       <unset>                 5m5s
persistentvolumeclaim/moscow-volume-moscow-app-2   Bound    pvc-1055396c-8917-474f-8a1f-e651228f384b   100Mi      RWO            standard       <unset>                 5m5s
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ 
```

## Starting service on minikube

```bash
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ minikube service moscow-app
|-----------|------------|-------------|--------------|
| NAMESPACE |    NAME    | TARGET PORT |     URL      |
|-----------|------------|-------------|--------------|
| default   | moscow-app |             | No node port |
|-----------|------------|-------------|--------------|
üòø  service default/moscow-app has no node port
‚ùó  Services [default/moscow-app] have type "ClusterIP" not meant to be exposed, however for local development minikube allows you to access this !
üèÉ  Starting tunnel for service moscow-app.
|-----------|------------|-------------|------------------------|
| NAMESPACE |    NAME    | TARGET PORT |          URL           |
|-----------|------------|-------------|------------------------|
| default   | moscow-app |             | http://127.0.0.1:44425 |
|-----------|------------|-------------|------------------------|
üéâ  Opening service default/moscow-app in default browser...
‚ùó  Because you are using a Docker driver on linux, the terminal needs to be open to run it.
Error: Failed to open Wayland display, fallback to X11. WAYLAND_DISPLAY='wayland-0' DISPLAY=':0'
...
...
...
```

## Request Counter comparison

```bash
tjann@fedora:~$ kubectl exec pod/moscow-app-0 -- cat /data/visits
79tjann@fedora:~$ kubectl exec pod/moscow-app-1 -- cat /data/visits
80tjann@fedora:~$ kubectl exec pod/moscow-app-2 -- cat /data/visits
77tjann@fedora:~$ 
```

## 2. Persistent Storage Validation

```bash
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl delete pods moscow-app-0
pod "moscow-app-0" deleted
^Ctjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl get pvc
NAME                         STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
moscow-volume-moscow-app-0   Bound    pvc-23b3cb0b-1aca-474f-b628-b9bf8dbf066d   100Mi      RWO            standard       <unset>                 12m
moscow-volume-moscow-app-1   Bound    pvc-03b4b0ed-6741-495d-86c0-a7ead78f05a3   100Mi      RWO            standard       <unset>                 12m
moscow-volume-moscow-app-2   Bound    pvc-1055396c-8917-474f-8a1f-e651228f384b   100Mi      RWO            standard       <unset>                 12m
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl exec moscow-app-0 -- cat /data/visits
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl exec moscow-app-0 -- cat /data/visits
103
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ 
```

## 3. Headless Service Access

```bash
tjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl exec moscow-app-0 -- nslookup moscow-app-1.moscow-app.default.svc.cluster.local
Server:         10.96.0.10
Address:        10.96.0.10:53


Name:   moscow-app-1.moscow-app.default.svc.cluster.local
Address: 10.244.0.36

tjann@fedora:~/DevOps-Course/k8s/moscow-app$ kubectl exec moscow-app-1 -- nslookup moscow-app-0.moscow-app.default.svc.cluster.local
Server:         10.96.0.10
Address:        10.96.0.10:53


Name:   moscow-app-0.moscow-app.default.svc.cluster.local
Address: 10.244.0.37

tjann@fedora:~/DevOps-Course/k8s/moscow-app$ 
```

## 5. Ordering Guarantee and Parallel Operations

To run all pods in parallel, I use `podManagementPolicy: Parallel`.

