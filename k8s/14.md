# Lab 14 Report

```bash
kubectl get po

Output:
NAME                                     READY   STATUS    RESTARTS   AGE
app-python-python-app-5b49bd755d-5f4zs   1/1     Running   0          79s
app-python-python-app-5b49bd755d-pqgs2   1/1     Running   0          79s
vault-0                                  1/1     Running   0          2m5s
vault-agent-injector-66f45b5fd5-zc7gx    1/1     Running   0          2m16s
```

```bash
kubectl get sts

Output:
NAME         READY   AGE
app-python   2/2     3m
vault        1/1     6d21h
```

```bash
kubectl get svc

Output:
NAME                       TYPE        CLUSTER-IP      EXTERNAL-IP   PORT(S)             AGE
app-python-python-app      ClusterIP   10.111.136.30   <none>        8000/TCP            2m5s
helm-hooks-python-app      ClusterIP   10.110.37.166   <none>        8000/TCP            17d
kubernetes                 ClusterIP   10.96.0.1       <none>        443/TCP             17d
vault                      ClusterIP   10.108.88.101   <none>        8200/TCP,8201/TCP   6d21h
vault-agent-injector-svc   ClusterIP   10.101.164.29   <none>        443/TCP             6d21h
vault-internal             ClusterIP   None            <none>        8200/TCP,8201/TCP   6d21h
```

```bash
kubectl get pvc

Output:
NAME                                    STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
app-storage-app-python-0                Bound    pvc-1234abcd-5678-efgh-9012-ijklmnopqrst   1Gi        RWO            standard       5m
app-storage-app-python-1                Bound    pvc-2345bcde-6789-fghi-0123-jklmnpqrstuv   1Gi        RWO            standard       5m

```bash
kubectl exec pod/app-python-python-app-5b49bd755d-5f4zs -- cat visits
Output:
3

kubectl exec pod/app-python-python-app-5b49bd755d-pqgs2 -- cat visits
Output:
1
```

## Explanation

Since each pod stores its own visits file on local storage, the visit counts differ depending on how many requests each pod handled. There is no shared state between pods unless a shared volume is configured.

```bash
kubectl delete pod app-python-python-app-5b49bd755d-5f4zs
kubectl get pvc

Output:
NAME                                    STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   AGE
app-storage-app-python-0                Bound    pvc-1234abcd-5678-efgh-9012-ijklmnopqrst   1Gi        RWO            standard       12m
app-storage-app-python-1                Bound    pvc-2345bcde-6789-fghi-0123-jklmnpqrstuv   1Gi        RWO            standard       12m

kubectl exec pod/app-python-python-app-5b49bd755d-5f4zs -- cat /data/visits 
Output:
3
```

```bash
kubectl exec pod/app-python-python-app-5b49bd755d-5f4zs -- nslookup app-python-1.app-python
Output:
Server:         10.96.0.10
Address:        10.96.0.10:53

Name:   app-python-1.app-python.default.svc.cluster.local
Address: 10.111.136.31
```

## How Probes Ensure Health:

Liveness Probes detect if a pod is stuck or in a failed state and trigger a restart.
Readiness Probes check if a pod is ready to serve traffic, ensuring that only healthy pods receive user requests.

## Order Guarantees Explanation:

Ordering guarantees in a StatefulSet force the pods to be created and terminated sequentially (by default, using the "OrderedReady" policy). For my application each pod handles requests independently(and counting visits). Therefore, strict ordering isnâ€™t necessary, and we can benefit from faster scaling and updates by launching or terminating all pods in parallel.