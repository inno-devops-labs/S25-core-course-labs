# 14

```bash
$ kubectl get po,svc,sts,pvc
NAME                                         READY   STATUS    RESTARTS      AGE
pod/app-python-0                             1/1     Running   0             55s
pod/app-python-1                             1/1     Running   0             55s
pod/app-python-2                             1/1     Running   0             55s
pod/app-python-config-7cd9d5dd88-qc4nl       1/1     Running   1 (8d ago)    9d
pod/helm-hooks-app-python-7588768b54-nwlwx   1/1     Running   4 (8d ago)    18d
pod/vault-0                                  1/1     Running   2 (83m ago)   9d
pod/vault-agent-injector-66f45b5fd5-skd57    1/1     Running   2 (8d ago)    9d

NAME                               TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
service/app-python                 ClusterIP   10.111.82.168    <none>        8000/TCP            55s
service/helm-hooks-app-python      ClusterIP   10.100.234.132   <none>        8000/TCP            18d
service/kubernetes                 ClusterIP   10.96.0.1        <none>        443/TCP             18d
service/nginx                      ClusterIP   None             <none>        80/TCP              8d
service/vault                      ClusterIP   10.111.164.229   <none>        8200/TCP,8201/TCP   9d
service/vault-agent-injector-svc   ClusterIP   10.111.118.64    <none>        443/TCP             9d
service/vault-internal             ClusterIP   None             <none>        8200/TCP,8201/TCP   9d

NAME                          READY   AGE
statefulset.apps/app-python   3/3     55s
statefulset.apps/vault        1/1     9d

NAME                                                   STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
persistentvolumeclaim/app-python-volume-app-python-0   Bound    pvc-68c23367-edde-457a-9b8e-c8d11ff85f14   1Gi        RWO            standard       <unset>                 49m
persistentvolumeclaim/app-python-volume-app-python-1   Bound    pvc-16f8b51e-568f-46e6-a9bf-8c3e8799d089   1Gi        RWO            standard       <unset>                 49m
persistentvolumeclaim/app-python-volume-app-python-2   Bound    pvc-03a92d52-dd6f-4970-8eb1-c9d17095e258   1Gi        RWO            standard       <unset>                 49m
```

```bash
$ kubectl exec pod/app-python-0 -- cat visits/visits.txt
19

$ kubectl exec pod/app-python-1 -- cat visits/visits.txt
22

$ kubectl exec pod/app-python-2 -- cat visits/visits.txt
21
```

Values are different because each pod has it's own persistent volume. So app-python-0, app-python-1, app-python-2 don't use same storage, and when we enter any of this pods counter of a pod increments by 1

```bash
$ kubectl delete pod app-python-0
pod "app-python-0" deleted

$ kubectl exec pod/app-python-0 -- cat visits/visits.txt
19
```

```bash
$ kubectl exec app-python-0 -- nslookup app-python-1.app-python.default.svc.cluster.local

Server:		10.96.0.10
Address:	10.96.0.10#53

Name:	app-python-1.app-python.default.svc.cluster.local
Address: 10.244.0.12
```

## Liveness Probe and Readiness Probe

Liveness probe checks whether the application within the pod is still running. If it's fails, Kubernetes will assume that something went wrong and it's in broken state, so it will restart the pod in order to attempt recovery
Readiness probe checks if pod is ready to serve traffic. If probe fails then Kubernetes stop sending traffic to the pod, once pod is recovered and ready Kubernetes start sending traffic.

## Why probes are critical

Probes are critical for stateful apps because they ensure that only healthy pods handle traffic, so it prevents disruptions and maintaining high availability.

## Explain why ordering guarantees are unnecessary for your app

It guarantees unnecessary for my app because each pod in my application has it's own counter(persistent volume), and all of them are independent from each other, there is no sense to have ordering, I don't need to say that pod-1 should be ready before pod-2
