apiVersion: v1
kind: Pod
metadata:
  name: {{ .Release.Name }}-pre-install
  annotations:
    "helm.sh/hook": pre-install
    "helm.sh/hook-weight": "-5"
    "helm.sh/hook-delete-policy": before-creation
spec:
  containers:
  - name: pre-install
    image: {{ .Values.hooks.preInstall.image }}
    command: {{ toYaml .Values.hooks.preInstall.command | nindent 6 }}
  restartPolicy: Never