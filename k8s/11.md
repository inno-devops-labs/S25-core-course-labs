# Kubernetes Secrets and Resource Management

## Secret Creation 

```bash
kubectl create secret generic my-secret --from-literal=MY_PASS=mysecretpassword
```

Command output:

```bash
secret/my-secret created
```

## Secret Verification

```bash
kubectl get secret my-secret -o yaml
```

Command output:

```bash
apiVersion: v1
data:
  MY_PASS: bXlzZWNyZXRwYXNzd29yZA==
kind: Secret
metadata:
  creationTimestamp: "2025-03-02T15:11:02Z"
  name: my-secret
  namespace: default
  resourceVersion: "9290"
  uid: d42ea43f-bc75-44f5-8312-b78c97e4f239
type: Opaque
```

## Decode Secret value

```bash
echo 'bXlzZWNyZXRwYXNzd29yZA==' | base64 --decode
```

Command output:

```bash
mysecretpassword
```

## Retrieve the List of Pods

```bash
kubectl get po 
```

Command output:

```bash
NAME                                         READY   STATUS    RESTARTS   AGE
helm-hooks-python-app-6b5fb9fb86-88s75       1/1     Running   0          3d19h
helm-release-python-app-8c568b7f-pt4vf       1/1     Running   0          3d19h
my-helm-release-python-app-689876f59-2j7th   1/1     Running   0          3m23s
```

## Verify the Secret

```bash
kubectl exec my-helm-release-python-app-689876f59-2j7th -- printenv | grep MY_PASS
```

Command output:

```bash
MY_PASS=mysecretpassword
```

# Vault Secret Management System

```bash
helm repo add hashicorp https://helm.releases.hashicorp.com
```

Command output:

```bash
"hashicorp" has been added to your repositories
```

```bash
helm repo update
```

Command output:

```bash
Hang tight while we grab the latest from your chart repositories...
...Successfully got an update from the "hashicorp" chart repository
Update Complete. ⎈Happy Helming!⎈
```

```bash
helm install vault hashicorp/vault --set "server.dev.enabled=true"
```

Command output:

```bash
NAME: vault
LAST DEPLOYED: Sun Mar  2 18:48:27 2025
NAMESPACE: default
STATUS: deployed
REVISION: 1
NOTES:
Thank you for installing HashiCorp Vault!

Now that you have deployed Vault, you should look over the docs on using
Vault with Kubernetes available here:

https://developer.hashicorp.com/vault/docs


Your release is named vault. To learn more about the release, try:

  $ helm status vault
  $ helm get manifest vault
```

```bash
kubectl get pods -l app.kubernetes.io/name=vault
```

Command output:

```bash
NAME      READY   STATUS    RESTARTS   AGE
vault-0   1/1     Running   0          2m
```

```bash
kubectl get pods
```

Command output:

```bash
NAME                                         READY   STATUS    RESTARTS   AGE
helm-hooks-python-app-6b5fb9fb86-88s75       1/1     Running   0          3d19h
helm-release-python-app-8c568b7f-pt4vf       1/1     Running   0          3d19h
my-helm-release-python-app-689876f59-2j7th   1/1     Running   0          10m35s
vault-0                                      1/1     Running   0          2m21s
vault-agent-injector-66f45b5fd5-9kqht        1/1     Running   0          2m21s
```

```bash
kubectl exec -it my-helm-release-python-app-689876f59-2j7th -- bash
cat /vault/secrets/myapp-config
```

Command output:

```bash
username: admin
password: s3cr3t
```

## Disk Usage

```bash
df -h
```

Command output:

```bash
Filesystem        Size    Used   Avail Capacity iused ifree %iused  Mounted on
/dev/disk3s1s1   228Gi    10Gi   112Gi     9%    412k  1.2G    0%   /
devfs            210Ki   210Ki     0Bi   100%     728     0  100%   /dev
/dev/disk3s6     228Gi   1.0Gi   112Gi     1%       1  1.2G    0%   /System/Volumes/VM
/dev/disk3s2     228Gi   6.4Gi   112Gi     6%    1.2k  1.2G    0%   /System/Volumes/Preboot
/dev/disk3s4     228Gi   4.1Mi   112Gi     1%      64  1.2G    0%   /System/Volumes/Update
/dev/disk1s2     500Mi   6.0Mi   483Mi     2%       3  4.9M    0%   /System/Volumes/xarts
/dev/disk1s1     500Mi   5.4Mi   483Mi     2%      34  4.9M    0%   /System/Volumes/iSCPreboot
/dev/disk1s3     500Mi   564Ki   483Mi     1%      43  4.9M    0%   /System/Volumes/Hardware
/dev/disk3s5     228Gi    97Gi   112Gi    47%    1.6M  1.2G    0%   /System/Volumes/Data
map auto_home      0Bi     0Bi     0Bi   100%       0     0     -   /System/Volumes/Data/home
/dev/disk3s3     228Gi   987Mi   112Gi     1%      36  1.2G    0%   /Volumes/Recovery
```
