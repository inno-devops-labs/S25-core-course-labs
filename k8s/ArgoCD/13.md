```
dpttk@codenv:~/uni/devops/S25-core-course-labs$ kubectl get pods -n prod
NAME                                       READY   STATUS    RESTARTS   AGE
python-app-prod-web-app-5fd56f8f55-k98c9   1/1     Running   0          7m16s
python-app-prod-web-app-5fd56f8f55-xhbq4   1/1     Running   0          7m16s


dpttk@codenv:~/uni/devops/S25-core-course-labs$ kubectl patch deployment python-app-prod-web-app -n prod --patch '{"spec":
{"replicas": 3}}'
deployment.apps/python-app-prod-web-app patched

dpttk@codenv:~/uni/devops/S25-core-course-labs$ kubectl get pods -n prod
NAME                                       READY   STATUS    RESTARTS   AGE
python-app-prod-web-app-5fd56f8f55-k98c9   1/1     Running   0          8m20s
python-app-prod-web-app-5fd56f8f55-q8ntp   1/1     Running   0          12s
python-app-prod-web-app-5fd56f8f55-xhbq4   1/1     Running   0          8m20s

dpttk@codenv:~/uni/devops/S25-core-course-labs$ kubectl delete pod -n prod python-app-prod-web-app-5fd56f8f55-q8ntp
pod "python-app-prod-web-app-5fd56f8f55-q8ntp" deleted


dpttk@codenv:~/uni/devops/S25-core-course-labs$ kubectl get pods -n prod
NAME                                       READY   STATUS    RESTARTS   AGE
python-app-prod-web-app-5fd56f8f55-k98c9   1/1     Running   0          9m30s
python-app-prod-web-app-5fd56f8f55-wx9lz   1/1     Running   0          36s
python-app-prod-web-app-5fd56f8f55-xhbq4   1/1     Running   0          9m30s
```

![Screenshot](screenshot/sc.png)
![Screenshot](screenshot/sc2.png)


# ArgoCD: Configuration Drift vs. Runtime Events

ArgoCD is a declarative GitOps continuous delivery tool for Kubernetes that follows the principle of the **desired state** being stored in Git. Understanding how it handles configuration drift versus runtime events is crucial for effective cluster management.

## Configuration Drift

**Configuration drift** occurs when the actual state of your Kubernetes resources differs from the desired state defined in your Git repository.

### How ArgoCD Handles Configuration Drift:

1. **Continuous Reconciliation**:
   - ArgoCD constantly compares the desired state (in Git) with the actual state (in the cluster)
   - Any differences are detected as "drift"
   - By default, ArgoCD will automatically reconcile by applying the Git configuration to the cluster

2. **Self-Healing**:
   - If someone manually changes a resource (using kubectl edit/patch/apply), ArgoCD detects this as drift
   - ArgoCD will revert these changes back to match what's defined in Git
   - This ensures that Git remains the single source of truth

3. **Drift Detection**:
   - ArgoCD shows out-of-sync resources in its UI
   - Administrators can configure how ArgoCD responds to drift (auto-sync or manual approval)

For example, in the commands above, when we manually patched the deployment to have 7 replicas, this would be considered configuration drift if the Git repository specified a different number (like 3). ArgoCD would revert this change back to the number defined in Git.

## Runtime Events

**Runtime events** are changes that happen during normal operation of the cluster that don't affect the configuration but affect the runtime state of resources.

### How ArgoCD Handles Runtime Events:

1. **Observes, Doesn't Override**:
   - ArgoCD doesn't interfere with runtime scaling, node failures, pod restarts, etc.
   - These are considered normal Kubernetes behaviors, not configuration drift

2. **Examples of Runtime Events ArgoCD Ignores**:
   - Pods being rescheduled to different nodes
   - Horizontal Pod Autoscaler changing the number of replicas
   - Kubernetes restarting pods after failures
   - Pod status changes (running, pending, failed)

3. **Resource Health Assessment**:
   - ArgoCD tracks the health of resources, not just configuration
   - Shows resource health in the UI while respecting Kubernetes' own handling of runtime events

For example, when we manually deleted the pod `python-app-prod-5c56d97996-jm5lb`, Kubernetes automatically created a new pod `python-app-prod-5c56d97996-5qnjq` to maintain the desired replica count. ArgoCD would not interfere with this process as it's a normal Kubernetes runtime behavior and not a configuration change.

## Key Differences

- **Configuration Drift**: Changes to the structure, specification, or definition of resources that differ from Git (ArgoCD will revert)
- **Runtime Events**: Normal operational changes that don't modify the resource definitions (ArgoCD won't interfere)

Understanding this distinction helps explain why ArgoCD reverts some changes but allows others to happen naturally within the cluster.
