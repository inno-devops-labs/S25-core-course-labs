# Kubernetes ConfigMaps

# Task 1

I introduced the `/visits` and `/highscore` endpoints to python and javascript applications respectively.
Both of them utilize the `/data` folder in the `docker-compose.yaml` root directory to store persistant data.

# Task 2

The respetive `files/config.json` and their integraion in `deployment.yaml` using `configMap` and `.Files.Get` were created.
However due to the fact that most fields are already declared in `deployment.yaml` and just use the `values.yaml`, that's where
most changes are.

After the tasks are done, here are the commands to prove it:

```bash
❯ kubectl get pods
NAME                                    READY   STATUS    RESTARTS        AGE
app-javascript-dbf5cd648-8mjlj          1/1     Running   0               50s
app-javascript-dbf5cd648-cb29w          1/1     Running   0               50s
app-javascript-dbf5cd648-w9vjk          1/1     Running   0               50s
app-python-7bf554647f-cb5qf             1/1     Running   0               8m57s
app-python-7bf554647f-mwsl6             1/1     Running   0               8m57s
app-python-7bf554647f-t9nmb             1/1     Running   0               8m57s
vault-0                                 1/1     Running   1 (3h25m ago)   4h5m
vault-agent-injector-66f45b5fd5-kdlvj   1/1     Running   1 (3h25m ago)   4h5m
```

```bash
❯ kubectl exec -it app-python-7bf554647f-cb5qf -- cat /config.json

{"password": "secret1234"}%
```

And for the ConfigMap via env. variables:

```bash
❯ kubectl exec -it app-python-7bf554647f-cb5qf -- printenv
PATH=/home/appuser/.local/bin:/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
HOSTNAME=app-python-7bf554647f-cb5qf
TERM=xterm
config.json=
{"password": "secret1234"}
FIRST_ENV_VAR=first env variable
SECOND_ENV_VAR=second env variable
THIRD_ENV_VAR=third env variable
APP_JAVASCRIPT_PORT_3000_TCP_PROTO=tcp
APP_JAVASCRIPT_PORT_3000_TCP_ADDR=10.105.176.99
VAULT_SERVICE_HOST=10.98.236.213
APP_PYTHON_PORT_8000_TCP_PORT=8000
VAULT_AGENT_INJECTOR_SVC_SERVICE_PORT=443
APP_PYTHON_PORT_8000_TCP=tcp://10.101.76.146:8000
APP_PYTHON_PORT_8000_TCP_PROTO=tcp
APP_PYTHON_PORT_8000_TCP_ADDR=10.101.76.146
APP_JAVASCRIPT_SERVICE_HOST=10.105.176.99
APP_JAVASCRIPT_SERVICE_PORT=3000
VAULT_SERVICE_PORT=8200
KUBERNETES_PORT=tcp://10.96.0.1:443
VAULT_PORT_8200_TCP=tcp://10.98.236.213:8200
VAULT_PORT_8200_TCP_ADDR=10.98.236.213
VAULT_PORT_8201_TCP_PORT=8201
VAULT_PORT=tcp://10.98.236.213:8200
KUBERNETES_PORT_443_TCP=tcp://10.96.0.1:443
VAULT_AGENT_INJECTOR_SVC_SERVICE_HOST=10.96.115.38
APP_PYTHON_PORT=tcp://10.101.76.146:8000
APP_JAVASCRIPT_PORT_3000_TCP_PORT=3000
VAULT_PORT_8200_TCP_PROTO=tcp
KUBERNETES_SERVICE_PORT=443
VAULT_AGENT_INJECTOR_SVC_PORT=tcp://10.96.115.38:443
VAULT_AGENT_INJECTOR_SVC_PORT_443_TCP_PORT=443
VAULT_AGENT_INJECTOR_SVC_PORT_443_TCP_ADDR=10.96.115.38
KUBERNETES_SERVICE_PORT_HTTPS=443
APP_PYTHON_SERVICE_HOST=10.101.76.146
APP_PYTHON_SERVICE_PORT=8000
APP_JAVASCRIPT_SERVICE_PORT_HTTP=3000
APP_JAVASCRIPT_PORT_3000_TCP=tcp://10.105.176.99:3000
VAULT_PORT_8200_TCP_PORT=8200
VAULT_AGENT_INJECTOR_SVC_PORT_443_TCP_PROTO=tcp
KUBERNETES_PORT_443_TCP_ADDR=10.96.0.1
VAULT_SERVICE_PORT_HTTPS_INTERNAL=8201
KUBERNETES_PORT_443_TCP_PROTO=tcp
VAULT_SERVICE_PORT_HTTP=8200
VAULT_PORT_8201_TCP=tcp://10.98.236.213:8201
KUBERNETES_PORT_443_TCP_PORT=443
VAULT_AGENT_INJECTOR_SVC_SERVICE_PORT_HTTPS=443
VAULT_AGENT_INJECTOR_SVC_PORT_443_TCP=tcp://10.96.115.38:443
APP_PYTHON_SERVICE_PORT_HTTP=8000
APP_JAVASCRIPT_PORT=tcp://10.105.176.99:3000
VAULT_PORT_8201_TCP_PROTO=tcp
VAULT_PORT_8201_TCP_ADDR=10.98.236.213
KUBERNETES_SERVICE_HOST=10.96.0.1
LANG=C.UTF-8
GPG_KEY=A035C8C19219BA821ECEA86B64E628F8D684696D
PYTHON_VERSION=3.11.9
PYTHON_PIP_VERSION=24.0
PYTHON_SETUPTOOLS_VERSION=65.5.1
PYTHON_GET_PIP_URL=https://github.com/pypa/get-pip/raw/dbf0c85f76fb6e1ab42aa672ffca6f0a675d9ee4/public/get-pip.py
PYTHON_GET_PIP_SHA256=dfe9fd5c28dc98b5ac17979a953ea550cec37ae1b47a5116007395bfacff2ab9
PYTHONPATH=/app
HOME=/home/appuser
```
