# Lab 12: Kubernetes ConfigMaps | Eldar Mametov 

## Task 1 and Bonus task 

For my python and golang application, I created additional `/visits` endpoints that output the number of visits to the site. I have demonstrated their functionality in the `README.md` files of these projects. 

I also updated the docker-compose.yaml in the monitoring project and added volume to our visits files that store the number of visits to the home page. 

## Task 2

I read the introduction to ConfigMap and followed the instructions in the task.    
I created a files folder and config.json, and updated deployment.yaml and values.yaml, which I adapted to ConfigMap. I performed these actions in both projects. 

Below are the results of my work: 

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl get configmaps,pods,svc,serviceaccounts
NAME                              DATA   AGE
configmap/golang-web-app-config   1      3m26s
configmap/kube-root-ca.crt        1      10d
configmap/web-apps-config         1      47m

NAME                                        READY   STATUS      RESTARTS        AGE
pod/golang-web-app-647d45ff9c-j5ntk         2/2     Running     0               3m25s
pod/postinstall-hook                        0/1     Completed   0               47m
pod/preinstall-hook                         0/1     Completed   0               47m
pod/vault-0                                 1/1     Running     2 (3h37m ago)   3d5h
pod/vault-agent-injector-66f45b5fd5-t9x62   1/1     Running     3 (127m ago)    3d5h
pod/web-apps-5d797b94f9-hb2kz               2/2     Running     5 (37m ago)     40m

NAME                                  TYPE        CLUSTER-IP       EXTERNAL-IP   PORT(S)             AGE
service/golang-web-app                ClusterIP   10.107.186.78    <none>        8000/TCP            3m26s
service/helm-hooks-release-web-apps   ClusterIP   10.97.254.224    <none>        8000/TCP            10d
service/kubernetes                    ClusterIP   10.96.0.1        <none>        443/TCP             10d
service/vault                         ClusterIP   10.106.252.247   <none>        8200/TCP,8201/TCP   3d5h
service/vault-agent-injector-svc      ClusterIP   10.96.170.185    <none>        443/TCP             3d5h
service/vault-internal                ClusterIP   None             <none>        8200/TCP,8201/TCP   3d5h
service/web-apps                      ClusterIP   10.106.65.175    <none>        8000/TCP            47m

NAME                                         SECRETS   AGE
serviceaccount/default                       0         10d
serviceaccount/golang-web-app                0         160m
serviceaccount/helm-hooks-release-web-apps   0         10d
serviceaccount/vault                         0         3d5h
serviceaccount/vault-agent-injector          0         3d5h
serviceaccount/web-apps                      0         47m
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl describe configmaps web-apps-config
Name:         web-apps-config
Namespace:    default
Labels:       app.kubernetes.io/instance=web-apps
              app.kubernetes.io/managed-by=Helm
              app.kubernetes.io/name=web-apps
              app.kubernetes.io/version=1.16.0
              helm.sh/chart=web-apps-0.1.0
Annotations:  meta.helm.sh/release-name: web-apps
              meta.helm.sh/release-namespace: default

Data
====
config.json:
----

{
    "myname": "Eldar"
}


BinaryData
====

Events:  <none>
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl describe configmaps golang-web-app-config
Name:         golang-web-app-config
Namespace:    default
Labels:       app.kubernetes.io/instance=golang-web-app
              app.kubernetes.io/managed-by=Helm
              app.kubernetes.io/name=golang-web-app
              app.kubernetes.io/version=1.16.0
              helm.sh/chart=golang-web-app-0.1.0
Annotations:  meta.helm.sh/release-name: golang-web-app
              meta.helm.sh/release-namespace: default

Data
====
config.json:
----

{
    "my-name": "Eldar"
}


BinaryData
====

Events:  <none>
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl exec web-apps-5d797b94f9-hb2kz -- cat /app/data/config.json
Defaulted container "web-apps" out of: web-apps, vault-agent, vault-agent-init (init)

{
    "myname": "Eldar"
}
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl exec golang-web-app-647d45ff9c-j5ntk -- cat /app/data/config.json
Defaulted container "golang-web-app" out of: golang-web-app, vault-agent, vault-agent-init (init)

{
    "my-name": "Eldar"
}
```

## Bonus task Environment Variables

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl exec golang-web-app-647d45ff9c-j5ntk -- printenv config.json
Defaulted container "golang-web-app" out of: golang-web-app, vault-agent, vault-agent-init (init)

{
    "my-name": "Eldar"
}
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl exec web-apps-5d797b94f9-hb2kz -- cat /app/data/config.json
Defaulted container "web-apps" out of: web-apps, vault-agent, vault-agent-init (init)

{
    "myname": "Eldar"
}
```
