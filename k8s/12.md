# ConfigMaps

Added the visitors counter (and a page to preview it):

![visits](./images/visits.png)

To properly function, we need to setup dir with correct permissions:

```bash
chown 1001:1001 ./data
```

## Task 2 - Config maps

Proof:

```bash
➜  k8s git:(lab12) ✗ helm install timeapp timeapp/
NAME: timeapp
LAST DEPLOYED: Tue May 13 18:45:31 2025
NAMESPACE: default
STATUS: deployed
REVISION: 1
➜  k8s git:(lab12) ✗ kubectl get pvc
NAME               STATUS   VOLUME                                     CAPACITY   ACCESS MODES   STORAGECLASS   VOLUMEATTRIBUTESCLASS   AGE
timeapp-data-pvc   Bound    pvc-72e9c064-aea8-4066-98ca-203170d1e408   1Gi        RWO            standard       <unset>                 8s
➜  k8s git:(lab12) ✗ kubectl get po
NAME                                    READY   STATUS      RESTARTS   AGE
timeapp-8db98946-884jv                  2/2     Running     0          11s
timeapp-8db98946-p5xpv                  2/2     Running     0          11s
timeapp-8db98946-twlqj                  2/2     Running     0          11s
timeapp-post-install                    0/1     Completed   0          11s
timeapp-pre-install                     0/1     Completed   0          16s
vault-0                                 1/1     Running     0          3h37m
vault-agent-injector-75f9dfc9c8-n6sp9   1/1     Running     0          3h37m
➜  k8s git:(lab12) ✗
➜  k8s git:(lab12) ✗ kubectl exec  timeapp-8db98946-p5xpv -- /bin/cat /app/config/config.json
Defaulted container "timeapp" out of: timeapp, vault-agent, vault-agent-init (init)
{ "TIMEZONE": "Europe/Moscow", "DATE_FORMAT": "%Y-%m-%d %H:%M:%S", "REFRESH_INTERVAL": 1, "HOST": "0.0.0.0", "LOG_LEVEL": "INFO", "PORT": 5000, "VISITS_FILE": "/data/visits.txt" }
➜  k8s git:(lab12) ✗
```
