# **Lab 12: Kubernetes ConfigMaps**  

---

## **Task 1: Upgrade Application for Persistence**  

### **Verify Changes**
```bash
suleiman@suleiman-lap:~/code/university/devops/S25-core-course-labs/monitoring$ docker-compose up --build -d
[+] Building 7.3s (15/15) FINISHED
 ✔ Volume "monitoring_visits_data"  Created                                   0.0s 
 ✔ Container loki                   Created                                   0.0s 
 ✔ Container promtail               Created                                   0.0s 
 ✔ Container grafana                Created                                   0.0s 
 ✔ Container app_python             Started                                   8.5s 
 ✔ Container prometheus             Created                                   0.0s 
 ✔ Container cadvisor               Created                                   0.0s 
```

### **Check Visit Counter via API**
```bash
suleiman@suleiman-lap:~/code/university/devops/S25-core-course-labs/monitoring$ curl http://localhost:5000/visits

StatusCode        : 200
StatusDescription : OK
Content           : Visit count: 1
RawContent        : HTTP/1.1 200 OK
                    Connection: close
                    Content-Length: 14
                    Content-Type: text/html; charset=utf-8
                    Date: Sun, 23 Mar 2025 14:10:00 GMT
                    Server: Uvicorn/0.29.0 Python/3.11.7
                    Visit count: 1
```
---

## **Task 2: ConfigMap Implementation**  

### **Step 4: Deploy the Changes**
```bash
suleiman@suleiman-lap:~/code/university/devops/S25-core-course-labs/k8s$ helm upgrade app-python app-python
Release "app-python" has been upgraded. Happy Helming!
NAME: app-python
LAST DEPLOYED: Sun Mar 23 14:15:00 2025
NAMESPACE: default
STATUS: deployed
REVISION: 8
```

---
### **Retrieve the List of Pods**
```bash
suleiman@suleiman-lap:~/code/university/devops/S25-core-course-labs/k8s$ kubectl get po
NAME                              READY   STATUS    RESTARTS   AGE
app-python-9a3c2d8b4f-x8y2z       1/1     Running   0          2m
app-python-9a3c2d8b4f-l9wkp       1/1     Running   0          2m
```

### **Check if ConfigMap is Mounted in the Pod**
```bash
suleiman@suleiman-lap:~/code/university/devops/S25-core-course-labs/k8s$ kubectl exec -it app-python-9a3c2d8b4f-l9wkp -- ls /config
config.json
```