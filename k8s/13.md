# ArgoCD

## Task 1

```
$ argocd app sync python-app
```
```
runner@Runner:~/projects/S25-core-course-labs/k8s$ argocd app sync python-app
TIMESTAMP                  GROUP        KIND       NAMESPACE                  NAME          STATUS   HEALTH         HOOK  MESSAGE
2025-03-16T02:43:48+00:00          ConfigMap         default                config          Synced                        
2025-03-16T02:43:48+00:00                Pod         default      postinstall-hook                                        
2025-03-16T02:43:48+00:00                Pod         default       preinstall-hook                                        
2025-03-16T02:43:48+00:00             Secret         default             my-secret          Synced                        
2025-03-16T02:43:48+00:00            Service         default  python-app-app-python-helm    Synced  Healthy               
2025-03-16T02:43:48+00:00         ServiceAccount     default  python-app-app-python-helm    Synced                        
2025-03-16T02:43:48+00:00   apps  Deployment         default  python-app-app-python-helm    Synced  Degraded              
2025-03-16T02:43:48+00:00   apps  StatefulSet        default     nginx-statefulset          Synced  Healthy               
2025-03-16T02:43:51+00:00                Pod     default       preinstall-hook   Running   Synced     PreSync  pod/preinstall-hook unchanged
2025-03-16T02:43:55+00:00                Pod         default       preinstall-hook        Succeeded   Synced      PreSync  pod/preinstall-hook unchanged
2025-03-16T02:43:55+00:00         ServiceAccount     default  python-app-app-python-helm    Synced                         serviceaccount/python-app-app-python-helm unchanged
2025-03-16T02:43:55+00:00             Secret         default             my-secret          Synced                         secret/my-secret unchanged
2025-03-16T02:43:55+00:00          ConfigMap         default                config          Synced                         configmap/config unchanged
2025-03-16T02:43:55+00:00            Service         default  python-app-app-python-helm    Synced   Healthy               service/python-app-app-python-helm unchanged
2025-03-16T02:43:55+00:00   apps  Deployment         default  python-app-app-python-helm    Synced   Degraded              deployment.apps/python-app-app-python-helm configured
2025-03-16T02:43:55+00:00   apps  StatefulSet        default     nginx-statefulset          Synced   Healthy               statefulset.apps/nginx-statefulset configured
2025-03-16T02:43:56+00:00   apps  StatefulSet     default     nginx-statefulset          Synced  Healthy               partitioned roll out complete: 1 new pods have been updated...
2025-03-16T02:43:56+00:00   apps  Deployment      default  python-app-app-python-helm    Synced  Degraded              Deployment "python-app-app-python-helm" exceeded its progress deadline

Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/python-app
Source:
- Repo:             https://github.com/dprostiruk/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/app-python-helm
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (b1a55a0)
Health Status:      Degraded

Operation:          Sync
Sync Revision:      b1a55a04dfd0067906987ab669200440547b01f5
Phase:              Failed
Start:              2025-03-16 02:43:48 +0000 UTC
Finished:           2025-03-16 02:43:56 +0000 UTC
Duration:           8s
Message:            one or more synchronization tasks completed unsuccessfully

GROUP  KIND            NAMESPACE  NAME                        STATUS     HEALTH    HOOK     MESSAGE
       Pod             default    preinstall-hook             Succeeded            PreSync  pod/preinstall-hook unchanged
       ServiceAccount  default    python-app-app-python-helm  Synced                        serviceaccount/python-app-app-python-helm unchanged
       Secret          default    my-secret                   Synced                        secret/my-secret unchanged
       ConfigMap       default    config                      Synced                        configmap/config unchanged
       Service         default    python-app-app-python-helm  Synced     Healthy            service/python-app-app-python-helm unchanged
apps   Deployment      default    python-app-app-python-helm  Synced     Degraded           Deployment "python-app-app-python-helm" exceeded its progress deadline
apps   StatefulSet     default    nginx-statefulset           Synced     Healthy            partitioned roll out complete: 1 new pods have been updated...
       Pod             default    postinstall-hook
```

## Task 2
```
runner@Runner:~/projects/S25-core-course-labs/k8s$ kubectl create namespace dev
namespace/dev created

runner@Runner:~/projects/S25-core-course-labs/k8s$ kubectl create namespace prod
namespace/prod created
```

### Applying the ArgoCD Application

```
runner@Runner:~/projects/S25-core-course-labs/k8s/ArgoCD$ kubectl apply -f argocd-python-dev.yaml
application.argoproj.io/python-app-dev created

runner@Runner:~/projects/S25-core-course-labs/k8s/ArgoCD$ kubectl apply -f argocd-python-prod.yaml
application.argoproj.io/python-app-prod created
```

### Drift

```
runner@Runner:~/projects/S25-core-course-labs/k8s/ArgoCD$ argocd app diff python-app-prod
runner@Runner:~/projects/S25-core-course-labs/k8s/ArgoCD$ 
```