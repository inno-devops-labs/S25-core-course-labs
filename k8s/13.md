# ArgoCD

## Task 1

```bash
➜  k8s git:(lab-13) argocd app sync moscow-time
TIMESTAMP  GROUP        KIND   NAMESPACE                  NAME    STATUS   HEALTH        HOOK  MESSAGE
2025-03-04T21:39:03+03:00         ServiceAccount     default          internal-app   Running   Synced              serviceaccount/internal-app created
2025-03-04T21:39:03+03:00          ConfigMap         default            app-config   Running   Synced              configmap/app-config created
2025-03-04T21:39:03+03:00            Service         default           moscow-time   Running   Synced              service/moscow-time created
2025-03-04T21:39:03+03:00   apps  Deployment         default           moscow-time   Running   Synced              deployment.apps/moscow-time created
2025-03-04T21:39:03+03:00   apps  Deployment         default           moscow-time   Running   Synced              deployment.apps/moscow-time unchanged
2025-03-04T21:39:03+03:00         ServiceAccount     default          internal-app   Running   Synced              serviceaccount/internal-app unchanged
2025-03-04T21:39:03+03:00          ConfigMap         default            app-config   Running   Synced              configmap/app-config unchanged
2025-03-04T21:39:03+03:00            Service         default           moscow-time   Running   Synced              service/moscow-time unchanged
2025-03-04T21:39:03+03:00   apps  Deployment         default           moscow-time    Synced  Progressing              deployment.apps/moscow-time unchanged
2025-03-04T21:39:03+03:00         ServiceAccount     default          internal-app    Synced   Synced                  serviceaccount/internal-app unchanged
2025-03-04T21:39:03+03:00          ConfigMap         default            app-config    Synced   Synced                  configmap/app-config unchanged
2025-03-04T21:39:03+03:00            Service         default           moscow-time    Synced  Healthy                  service/moscow-time unchanged

Name:               argocd/moscow-time
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/moscow-time
Source:
- Repo:             https://github.com/m0t9/S25-core-course-labs.git
  Target:           lab-13
  Path:             k8s/moscow-time
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab-13 (083a005)
Health Status:      Progressing

Operation:          Sync
Sync Revision:      083a005bf3a7e9da50f380373e88cd88a104414b
Phase:              Succeeded
Start:              2025-03-04 21:39:01 +0300 MSK
Finished:           2025-03-04 21:39:03 +0300 MSK
Duration:           2s
Message:            successfully synced (all tasks run)

GROUP  KIND            NAMESPACE  NAME          STATUS  HEALTH       HOOK  MESSAGE
       ServiceAccount  default    internal-app  Synced                     serviceaccount/internal-app unchanged
       ConfigMap       default    app-config    Synced                     configmap/app-config unchanged
       Service         default    moscow-time   Synced  Healthy            service/moscow-time unchanged
apps   Deployment      default    moscow-time   Synced  Progressing        deployment.apps/moscow-time unchanged
➜  k8s git:(lab-13) argocd app get moscow-time
Name:               argocd/moscow-time
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/moscow-time
Source:
- Repo:             https://github.com/m0t9/S25-core-course-labs.git
  Target:           lab-13
  Path:             k8s/moscow-time
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab-13 (083a005)
Health Status:      Healthy

GROUP  KIND            NAMESPACE  NAME          STATUS  HEALTH   HOOK  MESSAGE
       ServiceAccount  default    internal-app  Synced                 serviceaccount/internal-app unchanged
       ConfigMap       default    app-config    Synced                 configmap/app-config unchanged
       Service         default    moscow-time   Synced  Healthy        service/moscow-time unchanged
apps   Deployment      default    moscow-time   Synced  Healthy        deployment.apps/moscow-time unchanged
➜  k8s git:(lab-13) kubectl get po
NAME                          READY   STATUS    RESTARTS   AGE
moscow-time-95578bf5c-47rl8   1/1     Running   0          9m58s
moscow-time-95578bf5c-msvcx   1/1     Running   0          9m58s
moscow-time-95578bf5c-r5nnf   1/1     Running   0          9m58s
```

After the increase of replica count one can see changes in the sync status and number of pods.

```bash
➜  k8s git:(lab-13) ✗ argocd app get moscow-time
Name:               argocd/moscow-time
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/moscow-time
Source:
- Repo:             https://github.com/m0t9/S25-core-course-labs.git
  Target:           lab-13
  Path:             k8s/moscow-time
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab-13 (52a833c)
Health Status:      Healthy

GROUP  KIND            NAMESPACE  NAME          STATUS  HEALTH   HOOK  MESSAGE
       ServiceAccount  default    internal-app  Synced                 serviceaccount/internal-app unchanged
       ConfigMap       default    app-config    Synced                 configmap/app-config unchanged
       Service         default    moscow-time   Synced  Healthy        service/moscow-time unchanged
apps   Deployment      default    moscow-time   Synced  Healthy        deployment.apps/moscow-time unchanged
➜  k8s git:(lab-13) ✗ kubectl get po
NAME                          READY   STATUS    RESTARTS   AGE
moscow-time-95578bf5c-47rl8   1/1     Running   0          19m
moscow-time-95578bf5c-dcw97   1/1     Running   0          3m31s
moscow-time-95578bf5c-msvcx   1/1     Running   0          19m
moscow-time-95578bf5c-r5nnf   1/1     Running   0          19m

```
