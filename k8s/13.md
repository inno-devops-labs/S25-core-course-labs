# Lab 13: ArgoCD for GitOps Deployment

## Overview
Implemented GitOps workflows with ArgoCD to automate the deployment of a Python app. The process included installing ArgoCD via Helm and CLI, configuring the ArgoCD application, and testing auto-sync with multi-environment setups.

## Task 1: Deploy and Configure ArgoCD

### 1. Install ArgoCD via Helm
- **Add Helm repo and install:**
  ```bash
  helm repo add argo https://argoproj.github.io/argo-helm
  helm install argo argo/argo-cd --namespace argocd --create-namespace
  kubectl wait --for=condition=ready pod -l app.kubernetes.io/name=argocd-server -n argocd --timeout=90s
![install_argoCD.png](/k8s/lab13_images/install_argoCD.png)
![verify_argoCD_installation.png](/k8s/lab13_images/verify_argoCD_installation.png)

### 2. Install ArgoCD CLI
- **Verify installation:**

![verify_cli_argoCd_installation2.png](/k8s/lab13_images/verify_cli_argoCd_installation2.png)


### 3. Access the ArgoCD UI
- **Port-forward and login:**
![login_succ_argoCd.png](/k8s/lab13_images/login_succ_argoCd.png)

### 4. Configure Python App Sync
- **Verify sync**
![argoCD_app_sync_terminal.png](/k8s/lab13_images/argoCD_app_sync_terminal.png)
![argoCD_app_sync_terminal2.png](/k8s/lab13_images/argoCD_app_sync_terminal2.png)

### 5. Test Sync Workflow
![argoCD_sync_status.png](/k8s/lab13_images/argoCD_sync_status.png)
![verify_sync_argoCD.png](/k8s/lab13_images/verify_sync_argoCD.png)
**With 2 replicas**:
![verify_sync_argoCD_with_2_replicas.png](/k8s/lab13_images/verify_sync_argoCD_with_2_replicas.png)
![auto_sync.png](/k8s/lab13_images/auto_sync.png)


### 6. Deleting a Pod
```bash
> kubectl get pods -n prod
NAME                                          READY   STATUS    RESTARTS   AGE
python-app-prod-app-python-7b1k8f75cd-hkqmt   1/1     Running   0          7m11s

> kubectl delete pod -n prod -l app.kubernetes.io/name=app-python
pod "python-app-prod-app-python-7b1k8f75cd-hkqmt" deleted

> kubectl get pods -n prod
NAME                                          READY   STATUS    RESTARTS   AGE
python-app-prod-app-python-7b1k8f75cd-q2vvf   1/1     Running   0          1m48s
```

## Explanation of how ArgoCD handles configuration drift vs. runtime events: 
Argo CD continuously compares the desired state from Git with the actual state in Kubernetes to detect configuration drift. If drift is detected, Argo CD can alert or automatically sync to restore the desired state. It does not intervene in transient runtime events unless they cause a configuration drift.

