# Lab 13

## Task 1

```bash
[~/innop/spr2025/dev-ops/S25-core-course-labs]$ argocd app sync app-python
TIMESTAMP                  GROUP        KIND       NAMESPACE                  NAME          STATUS   HEALTH        HOOK  MESSAGE
2025-03-06T13:20:51+03:00          ConfigMap         default            app-config          Synced
2025-03-06T13:20:51+03:00             Secret         default                 token          Synced
2025-03-06T13:20:51+03:00            Service         default  app-python-helm-python-app    Synced  Healthy
2025-03-06T13:20:51+03:00         ServiceAccount     default  app-python-helm-python-app    Synced
2025-03-06T13:20:51+03:00   apps  Deployment         default  app-python-helm-python-app    Synced  Healthy
2025-03-06T13:20:51+03:00  batch         Job     default      pre-install-hook
2025-03-06T13:20:53+03:00  batch         Job     default      pre-install-hook   Running   Synced     PreSync  job.batch/pre-install-hook created
2025-03-06T13:21:18+03:00            Service         default  app-python-helm-python-app    Synced   Healthy              service/app-python-helm-python-app unchanged
2025-03-06T13:21:18+03:00   apps  Deployment         default  app-python-helm-python-app    Synced   Healthy              deployment.apps/app-python-helm-python-app unchanged
2025-03-06T13:21:18+03:00  batch         Job         default      pre-install-hook        Succeeded   Synced     PreSync  Reached expected number of succeeded pods
2025-03-06T13:21:18+03:00         ServiceAccount     default  app-python-helm-python-app    Synced                        serviceaccount/app-python-helm-python-app unchanged
2025-03-06T13:21:18+03:00             Secret         default                 token          Synced                        secret/token unchanged
2025-03-06T13:21:18+03:00          ConfigMap         default            app-config          Synced                        configmap/app-config unchanged
2025-03-06T13:21:19+03:00  batch         Job     default     post-install-hook   Running   Synced    PostSync  job.batch/post-install-hook created
2025-03-06T13:21:44+03:00  batch         Job     default     post-install-hook  Succeeded   Synced    PostSync  Reached expected number of succeeded pods

Name:               argocd/app-python
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/app-python
Source:
- Repo:             https://github.com/deeprecession/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/helm-python-app
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (826d433)
Health Status:      Healthy

Operation:          Sync
Sync Revision:      826d43357d8bf8471dd7153234d88d4c4a315539
Phase:              Succeeded
Start:              2025-03-06 13:20:50 +0300 MSK
Finished:           2025-03-06 13:21:44 +0300 MSK
Duration:           54s
Message:            successfully synced (no more tasks)

GROUP  KIND            NAMESPACE  NAME                        STATUS     HEALTH   HOOK      MESSAGE
batch  Job             default    pre-install-hook            Succeeded           PreSync   Reached expected number of succeeded pods
       ServiceAccount  default    app-python-helm-python-app  Synced                        serviceaccount/app-python-helm-python-app unchanged
       Secret          default    token                       Synced                        secret/token unchanged
       ConfigMap       default    app-config                  Synced                        configmap/app-config unchanged
       Service         default    app-python-helm-python-app  Synced     Healthy            service/app-python-helm-python-app unchanged
apps   Deployment      default    app-python-helm-python-app  Synced     Healthy            deployment.apps/app-python-helm-python-app unchanged
batch  Job             default    post-install-hook           Succeeded           PostSync  Reached expected number of succeeded pods


[~/innop/spr2025/dev-ops/S25-core-course-labs]$ argocd app get app-python
Name:               argocd/app-python
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/app-python
Source:
- Repo:             https://github.com/deeprecession/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/helm-python-app
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (826d433)
Health Status:      Healthy

GROUP  KIND            NAMESPACE  NAME                        STATUS     HEALTH   HOOK      MESSAGE
batch  Job             default    pre-install-hook            Succeeded           PreSync   Reached expect
ed number of succeeded pods
       ServiceAccount  default    app-python-helm-python-app  Synced                        serviceaccount/app-python-helm-python-app unchanged
       Secret          default    token                       Synced                        secret/token unchanged
       ConfigMap       default    app-config                  Synced                        configmap/app-config unchanged
       Service         default    app-python-helm-python-app  Synced     Healthy            service/app-python-helm-python-app unchanged
apps   Deployment      default    app-python-helm-python-app  Synced     Healthy            deployment.apps/app-python-helm-python-app unchanged
batch  Job             default    post-install-hook           Succeeded           PostSync  Reached expected number of succeeded pods

[~/innop/spr2025/dev-ops/S25-core-course-labs]$ kubectl get po
NAME                                         READY   STATUS    RESTARTS      AGE
app-python-helm-python-app-65594db68-bkmfs   1/1     Running   0             7m18s
helm-python-app-74685b895f-zxwpd             1/1     Running   1 (82m ago)   94m
vault-0                                      1/1     Running   1 (82m ago)   23h
vault-agent-injector-bbd76949d-zvnk8         1/1     Running   1 (82m ago)   23h
```

after increasing the number of replicas to 3

```bash
[~/innop/spr2025/dev-ops/S25-core-course-labs]$ argocd app sync app-python
TIMESTAMP                  GROUP        KIND       NAMESPACE                  NAME          STATUS   HEALTH        HOOK  MESSAGE
2025-03-06T13:25:48+03:00         ServiceAccount     default  app-python-helm-python-app    Synced
2025-03-06T13:25:48+03:00   apps  Deployment         default  app-python-helm-python-app    Synced  Healthy
2025-03-06T13:25:48+03:00          ConfigMap         default            app-config          Synced
2025-03-06T13:25:48+03:00             Secret         default                 token          Synced
2025-03-06T13:25:48+03:00            Service         default  app-python-helm-python-app    Synced  Healthy
2025-03-06T13:25:49+03:00   apps  Deployment     default  app-python-helm-python-app  OutOfSync  Healthy
2025-03-06T13:25:49+03:00  batch         Job     default      pre-install-hook
2025-03-06T13:25:51+03:00  batch         Job     default      pre-install-hook   Running   Synced     PreSync  job.batch/pre-install-hook created
2025-03-06T13:26:15+03:00   apps  Deployment     default  app-python-helm-python-app    Synced  Progressing
2025-03-06T13:26:17+03:00   apps  Deployment     default  app-python-helm-python-app    Synced  Healthy
2025-03-06T13:26:17+03:00   apps  Deployment         default  app-python-helm-python-app    Synced   Healthy              deployment.apps/app-python-helm-python-app configured
2025-03-06T13:26:17+03:00  batch         Job         default      pre-install-hook        Succeeded   Synced     PreSync  Reached expected number of succeeded pods
2025-03-06T13:26:17+03:00         ServiceAccount     default  app-python-helm-python-app    Synced                        serviceaccount/app-python-helm-python-app unchanged
2025-03-06T13:26:17+03:00             Secret         default                 token          Synced                        secret/token unchanged
2025-03-06T13:26:17+03:00          ConfigMap         default            app-config          Synced                        configmap/app-config unchanged
2025-03-06T13:26:17+03:00            Service         default  app-python-helm-python-app    Synced   Healthy              service/app-python-helm-python-app unchanged
2025-03-06T13:26:17+03:00  batch         Job     default     post-install-hook   Running   Synced    PostSync  job.batch/post-install-hook created
2025-03-06T13:26:44+03:00  batch         Job     default     post-install-hook  Succeeded   Synced    PostSync  Reached expected number of succeeded pods

Name:               argocd/app-python
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/app-python
Source:
- Repo:             https://github.com/deeprecession/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/helm-python-app
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (4247a77)
Health Status:      Healthy

Operation:          Sync
Sync Revision:      4247a77acdfb50d6ce0dc38eb144978aeb2fd4cc
Phase:              Succeeded
Start:              2025-03-06 13:25:49 +0300 MSK
Finished:           2025-03-06 13:26:44 +0300 MSK
Duration:           55s
Message:            successfully synced (no more tasks)

GROUP  KIND            NAMESPACE  NAME                        STATUS     HEALTH   HOOK      MESSAGE
batch  Job             default    pre-install-hook            Succeeded           PreSync   Reached expected number of succeeded pods
       ServiceAccount  default    app-python-helm-python-app  Synced                        serviceaccount/app-python-helm-python-app unchanged
       Secret          default    token                       Synced                        secret/token unchanged
       ConfigMap       default    app-config                  Synced                        configmap/app-config unchanged
       Service         default    app-python-helm-python-app  Synced     Healthy            service/app-python-helm-python-app unchanged
apps   Deployment      default    app-python-helm-python-app  Synced     Healthy            deployment.apps/app-python-helm-python-app configured
batch  Job             default    post-install-hook           Succeeded           PostSync  Reached expected number of succeeded pods


[~/innop/spr2025/dev-ops/S25-core-course-labs]$ argocd app get app-python
Name:               argocd/app-python
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/app-python
Source:
- Repo:             https://github.com/deeprecession/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/helm-python-app
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (4247a77)
Health Status:      Healthy

GROUP  KIND            NAMESPACE  NAME                        STATUS     HEALTH   HOOK      MESSAGE
batch  Job             default    pre-install-hook            Succeeded           PreSync   Reached expected number of succeeded pods
       ServiceAccount  default    app-python-helm-python-app  Synced                        serviceaccount/app-python-helm-python-app unchanged
       Secret          default    token                       Synced                        secret/token unchanged
       ConfigMap       default    app-config                  Synced                        configmap/app-config unchanged
       Service         default    app-python-helm-python-app  Synced     Healthy            service/app-python-helm-python-app unchanged
apps   Deployment      default    app-python-helm-python-app  Synced     Healthy            deployment.apps/app-python-helm-python-app configured
batch  Job             default    post-install-hook           Succeeded           PostSync  Reached expected number of succeeded pods


[~/innop/spr2025/dev-ops/S25-core-course-labs]$ kubectl get po
NAME                                         READY   STATUS    RESTARTS      AGE
app-python-helm-python-app-65594db68-8r2tz   1/1     Running   0             34s
app-python-helm-python-app-65594db68-bkmfs   1/1     Running   0             10m
app-python-helm-python-app-65594db68-pbhlk   1/1     Running   0             34s
helm-python-app-74685b895f-zxwpd             1/1     Running   1 (85m ago)   97m
vault-0                                      1/1     Running   1 (85m ago)   23h
vault-agent-injector-bbd76949d-zvnk8         1/1     Running   1 (85m ago)   23h
```
