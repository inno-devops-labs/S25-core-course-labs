# Lab 13 - ArgoCD

- Let's follow the guide and see what'll we get

## ArgoCD gets downloaded

- Downloading ArgoCD via 

```cmd
helm repo add argo https://argoproj.github.io/argo-helm
```

![argo_download.jpg](img/argo_download.png)

## Setting timeout

```cmd
kubectl wait --for=condition=ready pod -l app.kubernetes.io/name=argocd-server -n argocd --timeout=90s
```

![argo_timeout.jpg](img/argo_timeout.jpg)

## ArgoCD checkout 

```cmd
argocd version
```

![argo_checkout.jpg](img/argo_checkout.jpg)

## Running ArgoCD on localhost

```cmd
k8s>kubectl port-forward svc/argo-argocd-server -n argocd 8080:443 &
```

![argo_run_local.jpg](img/argo_run_local.jpg)

## ArgoCD logginning

- Let's check the password for loggining

```cmd
kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 --decode
```

- After that we can login

```cmd
argocd login localhost:8080 --insecure
```

![argo_login.jpg](img/argo_login.jpg)

## Creating argo-yaml and applying it

```cmd
kubectl apply -f Argo/argocd-python-app.yaml
```

![argo_apply_yaml.jpg](img/argo_apply_yaml.jpg)

## Sync!

```cmd
argocd app sync flask-app
```

![argo_sync.jpg](img/argo_sync.jpg)

## Checking if sync is correct

- I'll change values.yaml and check if everything has synced

![values_changed.jpg](img/values_changed.jpg)

- Now let's visit localhost where Argo is located and checkout the sync

![argo_screen.jpg](img/argo_screen.jpg)

- Everything is great!