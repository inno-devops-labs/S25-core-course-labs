# Lab 13: ArgoCD for GitOps Deployment | Mametov Eldar 

## Task 1: Deploy and Configure ArgoCD

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ helm repo add argo https://argoproj.github.io/argo-helm
"argo" has been added to your repositories
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ kubectl wait --for=condition=ready pod -l app.kubernetes.io/name=argocd-server -n argocd --timeout=90s
pod/argo-argocd-server-6f848cf7f7-zsfrz condition met
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ kubectl get pods -n argocd
NAME                                                     READY   STATUS              RESTARTS   AGE
argo-argocd-application-controller-0                     1/1     Running             0          58s
argo-argocd-applicationset-controller-6bbb8bf56d-tc4r6   1/1     Running             0          59s
argo-argocd-dex-server-f44689b7-nbjvd                    0/1     PodInitializing     0          59s
argo-argocd-notifications-controller-5447b8b5c6-kz4bb    1/1     Running             0          59s
argo-argocd-redis-5b5c7c6f8c-9hmwk                       0/1     ContainerCreating   0          59s
argo-argocd-repo-server-68747cd694-h8jcr                 1/1     Running             0          59s
argo-argocd-server-6f848cf7f7-zsfrz                      1/1     Running             0          57s
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ chmod +x argocd
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ sudo mv argocd /usr/local/bin/
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ argocd version
argocd: v2.14.4+3d901f2
  BuildDate: 2025-03-04T21:21:26Z
  GitCommit: 3d901f2037888af302a85f518bea70b33ee8e1c7
  GitTreeState: clean
  GoVersion: go1.23.3
  Compiler: gc
  Platform: linux/amd64
argocd-server: v2.14.4+3d901f2
```

```
kski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ kubectl port-forward svc/argo-argocd-server -n argocd 8080:443 &
[1] 25589
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
```

![alt text](image-2.png)

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs$ kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 --decode
yhCgnQWdYf1rHzOX
```

![alt text](image-3.png)

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ argocd app sync python-app
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
TIMESTAMP                  GROUP                    KIND       NAMESPACE                  NAME    STATUS    HEALTH            HOOK  MESSAGE
2025-03-10T11:27:24+03:00                         Secret         default           credentials    Synced
2025-03-10T11:27:24+03:00                        Service         default   python-app-web-apps    Synced   Healthy
2025-03-10T11:27:24+03:00                     ServiceAccount     default              web-apps    Synced
2025-03-10T11:27:24+03:00   apps              Deployment         default   python-app-web-apps    Synced   Progressing
2025-03-10T11:27:24+03:00  networking.k8s.io     Ingress         default   python-app-web-apps  OutOfSync  Missing
2025-03-10T11:27:24+03:00                      ConfigMap         default       web-apps-config    Synced
2025-03-10T11:27:24+03:00                            Pod         default      postinstall-hook
2025-03-10T11:27:24+03:00                            Pod         default       preinstall-hook
2025-03-10T11:27:32+03:00                Pod     default       preinstall-hook   Running   Synced     PreSync  pod/preinstall-hook created
2025-03-10T11:27:57+03:00  networking.k8s.io     Ingress     default   python-app-web-apps  OutOfSync  Progressing
2025-03-10T11:28:00+03:00                            Pod         default       preinstall-hook  Succeeded   Synced         PreSync  pod/preinstall-hook created
2025-03-10T11:28:00+03:00                     ServiceAccount     default              web-apps    Synced                            serviceaccount/web-apps unchanged
2025-03-10T11:28:00+03:00                         Secret         default           credentials    Synced                            secret/credentials unchanged
2025-03-10T11:28:00+03:00                      ConfigMap         default       web-apps-config    Synced                            configmap/web-apps-config unchanged
2025-03-10T11:28:00+03:00                        Service         default   python-app-web-apps    Synced   Healthy                  service/python-app-web-apps unchanged
2025-03-10T11:28:00+03:00   apps              Deployment         default   python-app-web-apps    Synced   Progressing              deployment.apps/python-app-web-apps unchanged
2025-03-10T11:28:00+03:00  networking.k8s.io     Ingress         default   python-app-web-apps  OutOfSync  Progressing              ingress.networking.k8s.io/python-app-web-apps created
 2025-03-10T11:28:06+03:00  networking.k8s.io     Ingress     default   python-app-web-apps  OutOfSync  Healthy              ingress.networking.k8s.io/python-app-web-apps created
2025-03-10T11:30:04+03:00  networking.k8s.io     Ingress     default   python-app-web-apps    Synced  Healthy              ingress.networking.k8s.io/python-app-web-apps created
```


```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ argocd app get python-app    
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/python-app
Source:
- Repo:             https://github.com/lekski1/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/web-apps
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (797c344)
Health Status:      Degraded

GROUP              KIND            NAMESPACE  NAME                 STATUS     HEALTH    HOOK     MESSAGE
                   Pod             default    preinstall-hook      Succeeded            PreSync  pod/preinstall-hook created
                   ServiceAccount  default    web-apps             Synced                        serviceaccount/web-apps unchanged
                   Secret          default    credentials          Synced                        secret/credentials unchanged
                   ConfigMap       default    web-apps-config      Synced                        configmap/web-apps-config unchanged
                   Service         default    python-app-web-apps  Synced     Healthy            service/python-app-web-apps unchanged
apps               Deployment      default    python-app-web-apps  Synced     Degraded           Deployment "python-app-web-apps" exceeded its progress deadline
networking.k8s.io  Ingress         default    python-app-web-apps  Synced     Healthy            ingress.networking.k8s.io/python-app-web-apps created    
                   Pod             default    postinstall-hook
```

after values.yaml changed: 
```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ argocd app get python-app
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Handling connection for 8080
Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/python-app
Source:
- Repo:             https://github.com/lekski1/S25-core-course-labs.git
  Target:           lab13
  Path:             k8s/web-apps
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (5f2224a)
Health Status:      Progressing

GROUP              KIND            NAMESPACE  NAME                 STATUS     HEALTH       HOOK     MESSAGE
                   Pod             default    preinstall-hook      Succeeded               PreSync  pod/preinstall-hook created
                   ServiceAccount  default    web-apps             Synced                           serviceaccount/web-apps unchanged
                   Secret          default    credentials          Synced                           secret/credentials unchanged
                   ConfigMap       default    web-apps-config      Synced                           configmap/web-apps-config unchanged
                   Service         default    python-app-web-apps  Synced     Healthy               service/python-app-web-apps unchanged
apps               Deployment      default    python-app-web-apps  Synced     Progressing           deployment.apps/python-app-web-apps configured        
networking.k8s.io  Ingress         default    python-app-web-apps  Synced     Healthy               ingress.networking.k8s.io/python-app-web-apps unchanged
                   Pod             default    postinstall-hook
```

```
lekski@LAPTOP-EA8M0FT5:/mnt/c/Users/Honor/Desktop/S25-core-course-labs/k8s$ kubectl get po
NAME                                    READY   STATUS      RESTARTS      AGE
golang-web-app-647d45ff9c-j5ntk         0/2     Error       0             3d17h
postinstall-hook                        0/1     Completed   0             3d18h
preinstall-hook                         0/1     Completed   0             3m3s
python-app-web-apps-fddd54554-gsrdc     0/2     Init:0/1    0             20m
python-app-web-apps-fddd54554-nt6sn     0/2     Init:0/1    0             2m30s
vault-0                                 1/1     Running     4 (37m ago)   6d23h
vault-agent-injector-66f45b5fd5-t9x62   1/1     Running     5 (37m ago)   6d23h
web-apps-5d797b94f9-hb2kz               0/2     Error       5             3d18h
```