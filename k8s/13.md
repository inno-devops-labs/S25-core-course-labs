# Argo

```bash
➜  k8s git:(lab13) helm install argo argo/argo-cd --namespace argocd --create-namespace
NAME: argo
LAST DEPLOYED: Tue May 13 18:48:57 2025
NAMESPACE: argocd
STATUS: deployed
REVISION: 1
TEST SUITE: None
NOTES:
In order to access the server UI you have the following options:

1. kubectl port-forward service/argo-argocd-server -n argocd 8080:443

    and then open the browser on http://localhost:8080 and accept the certificate

2. enable ingress in the values file `server.ingress.enabled` and either
      - Add the annotation for ssl passthrough: https://argo-cd.readthedocs.io/en/stable/operator-manual/ingress/#option-1-ssl-passthrough
      - Set the `configs.params."server.insecure"` in the values file and terminate SSL at your ingress: https://argo-cd.readthedocs.io/en/stable/operator-manual/ingress/#option-2-multiple-ingress-objects-and-hosts


After reaching the UI the first time you can login with username: admin and the random password generated during the installation. You can find the password by running:

kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d

(You should delete the initial secret afterwards as suggested by the Getting Started Guide: https://argo-cd.readthedocs.io/en/stable/getting_started/#4-login-using-the-cli)
➜  k8s git:(lab13) ✗ kubectl wait --for=condition=ready pod -l app.kubernetes.io/name=argocd-server -n argocd --timeout=90s
pod/argo-argocd-server-864dccc5b4-ccmw9 condition met
➜  k8s git:(lab13) ✗
```

Installed argocd via AUR:

```bash
➜  ~ argocd version
argocd: v2.14.4+unknown
  BuildDate: 2025-03-05T21:42:49Z
  GitCommit:
  GitTreeState:
  GitTag: 2.14.4
  GoVersion: go1.24.0
  Compiler: gc
  Platform: linux/amd64
FATA[0000] Argo CD server address unspecified
➜  ~

```

And forwarded (needed to tweak the command a bit):

```bash
➜  ~ kubectl port-forward svc/argo-argocd-server -n argocd 8080:443

Forwarding from 127.0.0.1:8080 -> 8080
Forwarding from [::1]:8080 -> 8080
```

Logged in:

```bash
➜  ~ kubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 --decode
QcFiP5Ovk4DK-qw2                                                                                                                         ➜  ~ argocd login localhost:8080 --insecure
Username: admin
Password:
'admin:login' logged in successfully
Context 'localhost:8080' updated
```

And apply configuration:

```bash
➜  k8s git:(lab13) ✗ kubectl apply -f ArgoCD/argocd-python-app.yaml
application.argoproj.io/python-app created

➜  k8s git:(lab13) ✗ argocd app get python-app
Name:               argocd/python-app
Project:            default
Server:             https://kubernetes.default.svc
Namespace:          default
URL:                https://argocd.example.com/applications/python-app
Source:
- Repo:             https://github.com/ArturLukianov/S25-core-course-labs/
  Target:           lab13
  Path:             k8s/timeapp
  Helm Values:      values.yaml
SyncWindow:         Sync Allowed
Sync Policy:        Automated
Sync Status:        Synced to lab13 (3edd2f5)
Health Status:      Progressing

GROUP  KIND                   NAMESPACE  NAME                         STATUS     HEALTH       HOOK     MESSAGE
       Pod                    default    python-app-pre-install       Succeeded               PreSync  pod/python-app-pre-install created
       Secret                 default    helm-secret                  Synced                           secret/helm-secret created
       ConfigMap              default    python-app-timeapp-config    Synced                           configmap/python-app-timeapp-config created
       PersistentVolumeClaim  default    python-app-timeapp-data-pvc  Synced     Healthy               persistentvolumeclaim/python-app-timeapp-data-pvc created
       Service                default    python-app-timeapp           Synced     Healthy               service/python-app-timeapp created
apps   Deployment             default    python-app-timeapp           Synced     Progressing           deployment.apps/python-app-timeapp created
➜  k8s git:(lab13) ✗
```


